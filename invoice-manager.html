<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Invoice Manager - Operix</title>
<script src="https://cdn.tailwindcss.com"></script>
<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<style>
  body { font-family: 'Inter', sans-serif; }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  
  .dragging {
    opacity: 0.5;
    transform: scale(0.98);
  }
  
  .drag-over {
    border-color: #3B82F6 !important;
    background-color: #EFF6FF !important;
  }
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect } = React;

// Lucide Icons
const X = () => (
  <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
  </svg>
);

const Save = () => (
  <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" />
  </svg>
);

const Upload = () => (
  <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
  </svg>
);

const ArrowLeft = () => (
  <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 19l-7-7m0 0l7-7m-7 7h18" />
  </svg>
);

const FileText = () => (
  <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
  </svg>
);

const Menu = () => (
  <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
  </svg>
);

// Operix Logo Component
const OperixLogo = ({ size = 'default' }) => {
  const dimensions = size === 'small' ? { w: 40, h: 40 } : { w: 60, h: 60 };
  
  return (
    <svg width={dimensions.w} height={dimensions.h} viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
      <rect width="40" height="40" rx="8" fill="#050C9C"/>
      <path d="M20 10 C25 10 28 13 28 18 C28 23 25 26 20 26 C15 26 12 23 12 18 C12 13 15 10 20 10 Z M20 14 C17 14 16 15.5 16 18 C16 20.5 17 22 20 22 C23 22 24 20.5 24 18 C24 15.5 23 14 20 14 Z" fill="white"/>
      <rect x="18" y="26" width="4" height="4" fill="white"/>
    </svg>
  );
};

function InvoiceManager() {
  const { useState, useEffect } = React;
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  const [activeTab, setActiveTab] = useState('layout'); // layout, settings, signature

  // Invoice Settings
  const [invoiceSettings, setInvoiceSettings] = useState({
    companyName: '',
    companyTIN: '',
    companyAddress: '',
    defaultVAT: '12',
    invoicePrefix: 'INV',
    startingInvoiceNumber: 1,
    termsAndConditions: '',
    signatureUrl: '',
    signedBy: ''
  });



 // Layout Configuration - THIS SHOULD BE HERE, INSIDE THE FUNCTION
const [invoiceLayoutConfig, setInvoiceLayoutConfig] = useState({
    sections: {
      header: { visible: true, order: 1, fontSize: 24, color: '#050C9C', fontWeight: 'bold' },
      companyInfo: { visible: true, order: 2, columns: 2, fontSize: 10, color: '#000000', fontWeight: 'normal' },
      itemsTable: { visible: true, order: 3, fontSize: 10, color: '#000000', headerBgColor: '#050C9C' },
      totals: { visible: true, order: 4, position: 'right', fontSize: 10, color: '#000000', fontWeight: 'normal' },
      paymentMethod: { visible: true, order: 5, fontSize: 10, color: '#050C9C', fontWeight: 'normal' },
      terms: { visible: true, order: 6, fontSize: 10, color: '#000000', fontWeight: 'normal' },
      signature: { visible: true, order: 7, columns: 2, fontSize: 10, color: '#000000', fontWeight: 'normal' },
      footer: { visible: true, order: 8, fontSize: 10, color: '#666666', fontWeight: 'normal' }
    },
    styling: {
      primaryColor: '#050C9C',
      secondaryColor: '#3B82F6',
      fontFamily: 'Arial',
      fontSize: 10,
      headerSize: 24
    },
    logoUrl: '',
    logoPosition: 'top'
  });

  const [draggedSection, setDraggedSection] = useState(null);
  const [selectedSection, setSelectedSection] = useState(null);
  const [uploadingLogo, setUploadingLogo] = useState(false);
  const [uploadingSignature, setUploadingSignature] = useState(false);

  // Initialize Firebase
  useEffect(() => {
    const firebaseConfig = {
      apiKey: "AIzaSyB56dPmBwgO4uWyXakhY9SJBCAz7bk0Do8",
      authDomain: "operix-c8a8c.firebaseapp.com",
      projectId: "operix-c8a8c",
      storageBucket: "operix-c8a8c.firebasestorage.app",
      messagingSenderId: "794223223499",
      appId: "1:794223223499:web:f059007b909cc15766f14e",
      measurementId: "G-6E4BD657K1"
    };

    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }

    const auth = firebase.auth();
    auth.onAuthStateChanged(async (currentUser) => {
      if (currentUser) {
        const db = firebase.firestore();
        const userDoc = await db.collection('users').doc(currentUser.uid).get();
        
        if (userDoc.exists && userDoc.data().role === 'admin') {
          setUser({
            uid: currentUser.uid,
            email: currentUser.email,
            displayName: userDoc.data().fullName || currentUser.email,
            ...userDoc.data()
          });
          
          // Load invoice settings and layout config
          await loadInvoiceSettings(db, currentUser.uid);
          await loadLayoutConfig(db, currentUser.uid);
        } else {
          window.location.href = 'dashboard.html';
        }
      } else {
        window.location.href = 'login.html';
      }
      setLoading(false);
    });
  }, []);

  // Load Invoice Settings
  const loadInvoiceSettings = async (db, userId) => {
    try {
      const settingsDoc = await db.collection('invoiceSettings').doc(userId).get();
      if (settingsDoc.exists) {
        const settings = settingsDoc.data();
        setInvoiceSettings({
          companyName: settings.companyName || '',
          companyTIN: settings.companyTIN || '',
          companyAddress: settings.companyAddress || '',
          defaultVAT: settings.defaultVAT || '12',
          invoicePrefix: settings.invoicePrefix || 'INV',
          startingInvoiceNumber: settings.startingInvoiceNumber || 1,
          termsAndConditions: settings.termsAndConditions || '',
          signatureUrl: settings.signatureUrl || '',
          signedBy: settings.signedBy || ''
        });
        console.log('✅ Invoice settings loaded:', settings);
      }
    } catch (error) {
      console.error('❌ Error loading invoice settings:', error);
    }
  };

  // Load Layout Configuration
const loadLayoutConfig = async (db, userId) => {
  try {
    const layoutDoc = await db.collection('invoiceLayoutConfigs').doc(userId).get();
    
    if (layoutDoc.exists) {
      const loadedConfig = layoutDoc.data();
      
      // Ensure footer section exists (for backward compatibility)
      if (!loadedConfig.sections.footer) {
        loadedConfig.sections.footer = { visible: true, order: 8 };
      }
      
      setInvoiceLayoutConfig(loadedConfig);
      console.log('✅ Layout config loaded:', loadedConfig);
    } else {
      console.log('⚠️ No saved layout, using defaults');
    }
  } catch (error) {
    console.error('❌ Error loading layout config:', error);
  }
};

  // Save Invoice Settings
  const saveInvoiceSettings = async () => {
    try {
      const db = firebase.firestore();
      await db.collection('invoiceSettings').doc(user.uid).set({
        ...invoiceSettings,
        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
      });
      
      console.log('✅ Invoice settings saved successfully!');
      alert('Invoice settings saved successfully!');
    } catch (error) {
      console.error('❌ Error saving invoice settings:', error);
      alert('Error saving invoice settings: ' + error.message);
    }
  };

  // Save Layout Configuration
  const saveLayoutConfiguration = async () => {
    try {
      const db = firebase.firestore();
      
      // Validate section orders
      const sections = Object.entries(invoiceLayoutConfig.sections);
      const orders = sections.map(([_, config]) => config.order);
      const hasValidOrders = orders.every(o => typeof o === 'number' && o > 0);
      
      if (!hasValidOrders) {
        alert('Error: Invalid section ordering detected');
        return;
      }
      
      // Save to Firestore
      await db.collection('invoiceLayoutConfigs').doc(user.uid).set({
        ...invoiceLayoutConfig,
        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
      });
      
      console.log('✅ Layout configuration saved successfully!');
      alert('Layout configuration saved successfully!');
      
    } catch (error) {
      console.error('❌ Error saving layout:', error);
      alert('Error saving layout configuration: ' + error.message);
    }
  };

  // Drag and Drop Handlers
  const handleDragStart = (sectionKey) => {
    setDraggedSection(sectionKey);
  };

  const handleDragOver = (e, targetSectionKey) => {
    e.preventDefault();
    
    if (!draggedSection || draggedSection === targetSectionKey) return;
    
    const draggedOrder = invoiceLayoutConfig.sections[draggedSection].order;
    const targetOrder = invoiceLayoutConfig.sections[targetSectionKey].order;
    
    if (draggedOrder === targetOrder) return;
    
    const newSections = { ...invoiceLayoutConfig.sections };
    
    // Shift sections between dragged and target
    Object.keys(newSections).forEach(key => {
      const section = newSections[key];
      
      if (draggedOrder < targetOrder) {
        // Dragging down
        if (section.order > draggedOrder && section.order <= targetOrder) {
          section.order--;
        }
      } else {
        // Dragging up
        if (section.order >= targetOrder && section.order < draggedOrder) {
          section.order++;
        }
      }
    });
    
    newSections[draggedSection].order = targetOrder;
    
    setInvoiceLayoutConfig({
      ...invoiceLayoutConfig,
      sections: newSections
    });
  };

  const handleDragEnd = () => {
    setDraggedSection(null);
  };

  // Upload to Cloudinary
  const uploadToCloudinary = async (file, type = 'logo') => {
    if (!file) return;
    
    if (type === 'logo') {
      setUploadingLogo(true);
    } else {
      setUploadingSignature(true);
    }

    const formData = new FormData();
    formData.append('file', file);
    formData.append('upload_preset', 'operix_products');
    formData.append('folder', type === 'logo' ? 'operix-logos' : 'operix-signatures');

    try {
      const response = await fetch('https://api.cloudinary.com/v1_1/dmrtrl4er/image/upload', {
        method: 'POST',
        body: formData
      });
      
      const data = await response.json();
      
      if (type === 'logo') {
        setInvoiceLayoutConfig(prev => ({ ...prev, logoUrl: data.secure_url }));
        setUploadingLogo(false);
      } else {
        setInvoiceSettings(prev => ({ ...prev, signatureUrl: data.secure_url }));
        setUploadingSignature(false);
      }
      
      console.log(`✅ ${type} uploaded successfully:`, data.secure_url);
    } catch (error) {
      console.error(`❌ ${type} upload error:`, error);
      alert(`Failed to upload ${type}. Please try again.`);
      if (type === 'logo') {
        setUploadingLogo(false);
      } else {
        setUploadingSignature(false);
      }
    }
  };

  const handleLogout = async () => {
    try {
      await firebase.auth().signOut();
      window.location.href = 'login.html';
    } catch (error) {
      console.error('Logout error:', error);
    }
  };

  // Get sorted sections for preview
  const getSortedSections = () => {
    return Object.entries(invoiceLayoutConfig.sections)
      .sort((a, b) => a[1].order - b[1].order)
      .map(([key]) => key);
  };

  if (loading) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-purple-50 via-white to-pink-50 flex items-center justify-center">
        <div className="text-center">
          <div className="w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
          <p className="text-gray-600 font-medium">Loading Invoice Manager...</p>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-50 via-white to-pink-50">
      {/* Header */}
      <header className="bg-white shadow-sm border-b border-gray-100 sticky top-0 z-30">
        <div className="px-8 py-4 flex items-center justify-between">
          <div className="flex items-center gap-4">
            <button
              onClick={() => window.location.href = 'dashboard.html'}
              className="flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"
            >
              <ArrowLeft />
              <span>Back to Dashboard</span>
            </button>
            <div className="flex items-center gap-3">
              <OperixLogo size="small" />
              <div>
                <h1 className="text-2xl font-bold text-gray-800">Invoice Manager</h1>
                <p className="text-sm text-gray-500">Configure your invoice templates and layout</p>
              </div>
            </div>
          </div>
          <div className="flex items-center gap-3">
            <span className="text-sm text-gray-600">{user?.displayName}</span>
            <button
              onClick={handleLogout}
              className="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors"
            >
              Logout
            </button>
          </div>
        </div>
      </header>

      <div className="container mx-auto px-4 py-8">
        {/* Tabs */}
        <div className="bg-white rounded-xl shadow-lg mb-6">
          <div className="flex border-b border-gray-200">
<button
  onClick={() => setActiveTab('layout')}
  className={`flex-1 px-6 py-4 font-semibold transition-colors flex items-center justify-center gap-2 ${
    activeTab === 'layout'
      ? 'border-b-2 border-blue-500 text-blue-600'
      : 'text-gray-600 hover:text-gray-800'
  }`}
>
  <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-3zM14 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1h-4a1 1 0 01-1-1v-3z" />
  </svg>
  Layout Editor
</button>
<button
  onClick={() => setActiveTab('settings')}
  className={`flex-1 px-6 py-4 font-semibold transition-colors flex items-center justify-center gap-2 ${
    activeTab === 'settings'
      ? 'border-b-2 border-blue-500 text-blue-600'
      : 'text-gray-600 hover:text-gray-800'
  }`}
>
  <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
  </svg>
  Invoice Settings
</button>
<button
  onClick={() => setActiveTab('signature')}
  className={`flex-1 px-6 py-4 font-semibold transition-colors flex items-center justify-center gap-2 ${
    activeTab === 'signature'
      ? 'border-b-2 border-blue-500 text-blue-600'
      : 'text-gray-600 hover:text-gray-800'
  }`}
>
  <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
  </svg>
  Signature & Terms
</button>
          </div>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {/* Left Column - Configuration */}
          <div className="space-y-6">
            {activeTab === 'layout' && (
              <>
                {/* Section Reordering */}
                <div className="bg-white rounded-xl shadow-lg p-6">
                  <div className="flex items-center justify-between mb-4">
                    <h3 className="text-xl font-bold">Section Order</h3>
                    <button
                      onClick={saveLayoutConfiguration}
                      className="flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:shadow-lg transition-all font-semibold"
                    >
                      <Save />
                      Save Layout
                    </button>
                  </div>
                  
<div className="flex items-center gap-2 text-sm text-gray-600 mb-4 bg-blue-50 p-3 rounded-lg border border-blue-100">
  <svg className="w-5 h-5 text-blue-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
  </svg>
  <span>Drag sections to reorder them. Toggle visibility with the checkbox.</span>
</div>
                  
<div className="space-y-2">
  {Object.entries(invoiceLayoutConfig.sections)
    .sort((a, b) => a[1].order - b[1].order)
    .map(([sectionKey, sectionConfig]) => (
      <div
        key={sectionKey}
        draggable
        onDragStart={() => handleDragStart(sectionKey)}
        onDragOver={(e) => handleDragOver(e, sectionKey)}
        onDragEnd={handleDragEnd}
        onClick={() => setSelectedSection(sectionKey)}
        className={`p-4 rounded-lg border-2 cursor-move transition-all ${
          draggedSection === sectionKey
            ? 'border-blue-500 bg-blue-50 opacity-50 dragging'
            : selectedSection === sectionKey
            ? 'border-green-500 bg-green-50 shadow-lg'
            : 'border-gray-200 bg-white hover:border-blue-300 hover:shadow-md'
        }`}
      >
        <div className="flex items-center justify-between">
          <div className="flex items-center gap-3">
            <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${
              selectedSection === sectionKey ? 'bg-green-500 text-white' : 'bg-blue-500 text-white'
            }`}>
              {sectionConfig.order}
            </div>
            <div>
              <p className="font-semibold text-gray-800 capitalize">
                {sectionKey.replace(/([A-Z])/g, ' $1').trim()}
              </p>
              <p className="text-xs text-gray-500">
                {sectionConfig.visible ? '✅ Visible' : '❌ Hidden'}
                {selectedSection === sectionKey && ' • Selected'}
              </p>
            </div>
          </div>
          
          <div className="flex items-center gap-2">
            <label className="flex items-center gap-2 cursor-pointer">
              <input
                type="checkbox"
                checked={sectionConfig.visible}
                onChange={(e) => {
                  e.stopPropagation();
                  setInvoiceLayoutConfig({
                    ...invoiceLayoutConfig,
                    sections: {
                      ...invoiceLayoutConfig.sections,
                      [sectionKey]: {
                        ...sectionConfig,
                        visible: e.target.checked
                      }
                    }
                  });
                }}
                className="w-4 h-4"
              />
              <span className="text-sm text-gray-600">Show</span>
            </label>
            
            <Menu />
          </div>
        </div>
      </div>
    ))}
</div>
</div>

{/* Selected Section Style Editor */}
{selectedSection && (
  <div className="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl shadow-lg p-6 border-2 border-green-300">
    <div className="flex items-center justify-between mb-4">
      <h3 className="text-xl font-bold text-green-700 capitalize flex items-center gap-2">
        <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
        </svg>
        Editing: {selectedSection.replace(/([A-Z])/g, ' $1').trim()}
      </h3>
      <button
        onClick={() => setSelectedSection(null)}
        className="px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded text-sm"
      >
        Close
      </button>
    </div>
    
    <div className="space-y-4">
      {/* Font Size */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">Font Size (px)</label>
        <input
          type="number"
          min="8"
          max="48"
          value={invoiceLayoutConfig.sections[selectedSection].fontSize || 10}
          onChange={(e) => setInvoiceLayoutConfig({
            ...invoiceLayoutConfig,
            sections: {
              ...invoiceLayoutConfig.sections,
              [selectedSection]: {
                ...invoiceLayoutConfig.sections[selectedSection],
                fontSize: parseInt(e.target.value)
              }
            }
          })}
          className="w-full px-3 py-2 border border-gray-300 rounded-lg"
        />
      </div>
      
      {/* Text Color */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">Text Color</label>
        <div className="flex items-center gap-2">
          <input
            type="color"
            value={invoiceLayoutConfig.sections[selectedSection].color || '#000000'}
            onChange={(e) => setInvoiceLayoutConfig({
              ...invoiceLayoutConfig,
              sections: {
                ...invoiceLayoutConfig.sections,
                [selectedSection]: {
                  ...invoiceLayoutConfig.sections[selectedSection],
                  color: e.target.value
                }
              }
            })}
            className="w-16 h-10 rounded border border-gray-300 cursor-pointer"
          />
          <input
            type="text"
            value={invoiceLayoutConfig.sections[selectedSection].color || '#000000'}
            onChange={(e) => setInvoiceLayoutConfig({
              ...invoiceLayoutConfig,
              sections: {
                ...invoiceLayoutConfig.sections,
                [selectedSection]: {
                  ...invoiceLayoutConfig.sections[selectedSection],
                  color: e.target.value
                }
              }
            })}
            className="flex-1 px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"
          />
        </div>
      </div>
      
      {/* Font Weight */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">Font Weight</label>
        <select
          value={invoiceLayoutConfig.sections[selectedSection].fontWeight || 'normal'}
          onChange={(e) => setInvoiceLayoutConfig({
            ...invoiceLayoutConfig,
            sections: {
              ...invoiceLayoutConfig.sections,
              [selectedSection]: {
                ...invoiceLayoutConfig.sections[selectedSection],
                fontWeight: e.target.value
              }
            }
          })}
          className="w-full px-3 py-2 border border-gray-300 rounded-lg"
        >
          <option value="normal">Normal</option>
          <option value="bold">Bold</option>
          <option value="600">Semi-Bold</option>
          <option value="300">Light</option>
        </select>
      </div>
      
      {/* Additional options for specific sections */}
      {selectedSection === 'itemsTable' && (
        <div>
          <label className="block text-sm font-medium text-gray-700 mb-2">Table Header Background</label>
          <div className="flex items-center gap-2">
            <input
              type="color"
              value={invoiceLayoutConfig.sections[selectedSection].headerBgColor || '#050C9C'}
              onChange={(e) => setInvoiceLayoutConfig({
                ...invoiceLayoutConfig,
                sections: {
                  ...invoiceLayoutConfig.sections,
                  [selectedSection]: {
                    ...invoiceLayoutConfig.sections[selectedSection],
                    headerBgColor: e.target.value
                  }
                }
              })}
              className="w-16 h-10 rounded border border-gray-300 cursor-pointer"
            />
            <input
              type="text"
              value={invoiceLayoutConfig.sections[selectedSection].headerBgColor || '#050C9C'}
              onChange={(e) => setInvoiceLayoutConfig({
                ...invoiceLayoutConfig,
                sections: {
                  ...invoiceLayoutConfig.sections,
                  [selectedSection]: {
                    ...invoiceLayoutConfig.sections[selectedSection],
                    headerBgColor: e.target.value
                  }
                }
              })}
              className="flex-1 px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"
            />
          </div>
        </div>
      )}
      
      {(selectedSection === 'companyInfo' || selectedSection === 'signature') && (
        <div>
          <label className="block text-sm font-medium text-gray-700 mb-2">Layout Columns</label>
          <select
            value={invoiceLayoutConfig.sections[selectedSection].columns || 2}
            onChange={(e) => setInvoiceLayoutConfig({
              ...invoiceLayoutConfig,
              sections: {
                ...invoiceLayoutConfig.sections,
                [selectedSection]: {
                  ...invoiceLayoutConfig.sections[selectedSection],
                  columns: parseInt(e.target.value)
                }
              }
            })}
            className="w-full px-3 py-2 border border-gray-300 rounded-lg"
          >
            <option value="1">1 Column</option>
            <option value="2">2 Columns</option>
          </select>
        </div>
      )}
      
      {selectedSection === 'totals' && (
        <div>
          <label className="block text-sm font-medium text-gray-700 mb-2">Position</label>
          <select
            value={invoiceLayoutConfig.sections[selectedSection].position || 'right'}
            onChange={(e) => setInvoiceLayoutConfig({
              ...invoiceLayoutConfig,
              sections: {
                ...invoiceLayoutConfig.sections,
                [selectedSection]: {
                  ...invoiceLayoutConfig.sections[selectedSection],
                  position: e.target.value
                }
              }
            })}
            className="w-full px-3 py-2 border border-gray-300 rounded-lg"
          >
            <option value="left">Left</option>
            <option value="right">Right</option>
            <option value="center">Center</option>
          </select>
        </div>
      )}
    </div>
  </div>
)}
















                {/* Styling Configuration */}
                <div className="bg-white rounded-xl shadow-lg p-6">
                  <h3 className="text-xl font-bold mb-4">Invoice Styling</h3>
                  
                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Primary Color</label>
                      <div className="flex items-center gap-2">
                        <input
                          type="color"
                          value={invoiceLayoutConfig.styling.primaryColor}
                          onChange={(e) => setInvoiceLayoutConfig({
                            ...invoiceLayoutConfig,
                            styling: {
                              ...invoiceLayoutConfig.styling,
                              primaryColor: e.target.value
                            }
                          })}
                          className="w-16 h-10 rounded border border-gray-300 cursor-pointer"
                        />
                        <input
                          type="text"
                          value={invoiceLayoutConfig.styling.primaryColor}
                          onChange={(e) => setInvoiceLayoutConfig({
                            ...invoiceLayoutConfig,
                            styling: {
                              ...invoiceLayoutConfig.styling,
                              primaryColor: e.target.value
                            }
                          })}
                          className="flex-1 px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"
                        />
                      </div>
                    </div>
                    
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Font Family</label>
                      <select
                        value={invoiceLayoutConfig.styling.fontFamily}
                        onChange={(e) => setInvoiceLayoutConfig({
                          ...invoiceLayoutConfig,
                          styling: {
                            ...invoiceLayoutConfig.styling,
                            fontFamily: e.target.value
                          }
                        })}
                        className="w-full px-3 py-2 border border-gray-300 rounded-lg"
                      >
                        <option value="Arial">Arial</option>
                        <option value="Times New Roman">Times New Roman</option>
                        <option value="Helvetica">Helvetica</option>
                        <option value="Courier New">Courier New</option>
                      </select>
                    </div>
                    
                    <div className="grid grid-cols-2 gap-4">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">Font Size (px)</label>
                        <input
                          type="number"
                          min="8"
                          max="16"
                          value={invoiceLayoutConfig.styling.fontSize}
                          onChange={(e) => setInvoiceLayoutConfig({
                            ...invoiceLayoutConfig,
                            styling: {
                              ...invoiceLayoutConfig.styling,
                              fontSize: parseInt(e.target.value)
                            }
                          })}
                          className="w-full px-3 py-2 border border-gray-300 rounded-lg"
                        />
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">Header Size (px)</label>
                        <input
                          type="number"
                          min="16"
                          max="36"
                          value={invoiceLayoutConfig.styling.headerSize}
                          onChange={(e) => setInvoiceLayoutConfig({
                            ...invoiceLayoutConfig,
                            styling: {
                              ...invoiceLayoutConfig.styling,
                              headerSize: parseInt(e.target.value)
                            }
                          })}
                          className="w-full px-3 py-2 border border-gray-300 rounded-lg"
                        />
                      </div>
                    </div>
                  </div>
                </div>

                {/* Logo Upload */}
                <div className="bg-white rounded-xl shadow-lg p-6">
                  <h3 className="text-xl font-bold mb-4">Company Logo</h3>
                  
                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">Logo Position</label>
                      <select
                        value={invoiceLayoutConfig.logoPosition}
                        onChange={(e) => setInvoiceLayoutConfig({
                          ...invoiceLayoutConfig,
                          logoPosition: e.target.value
                        })}
                        className="w-full px-3 py-2 border border-gray-300 rounded-lg"
                      >
                        <option value="top">Top (Centered)</option>
                        <option value="left">Left (Next to Header)</option>
                      </select>
                    </div>
                    
                    <div>
                      <input
                        type="file"
                        id="logoUpload"
                        accept="image/*"
                        style={{ display: 'none' }}
                        onChange={(e) => {
                          const file = e.target.files[0];
                          if (file) uploadToCloudinary(file, 'logo');
                        }}
                      />
                      
                      <button
                        onClick={() => document.getElementById('logoUpload').click()}
                        disabled={uploadingLogo}
                        className={`flex items-center gap-2 px-4 py-2 rounded-lg text-white transition-all ${
                          uploadingLogo ? 'bg-gray-400 cursor-not-allowed' : 'bg-blue-500 hover:bg-blue-600'
                        }`}
                      >
                        <Upload />
                        {uploadingLogo ? 'Uploading...' : 'Upload Logo'}
                      </button>
                      
                      {invoiceLayoutConfig.logoUrl && (
                        <div className="mt-4 relative inline-block">
                          <img 
                            src={invoiceLayoutConfig.logoUrl} 
                            alt="Logo" 
                            className="h-20 border-2 border-gray-200 rounded-lg"
                          />
                          <button
                            onClick={() => setInvoiceLayoutConfig({ ...invoiceLayoutConfig, logoUrl: '' })}
                            className="absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600"
                          >
                            <X />
                          </button>
                        </div>
                      )}
                    </div>
                  </div>
                </div>
              </>
            )}

            {activeTab === 'settings' && (
              <>
                {/* Company Information */}
                <div className="bg-white rounded-xl shadow-lg p-6">
                  <div className="flex items-center justify-between mb-4">
                    <h3 className="text-xl font-bold">Company Information</h3>
                    <button
                      onClick={saveInvoiceSettings}
                      className="flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:shadow-lg transition-all font-semibold"
                    >
                      <Save />
                      Save Settings
                    </button>
                  </div>
                  
                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Company Name *</label>
                      <input
                        type="text"
                        value={invoiceSettings.companyName}
                        onChange={(e) => setInvoiceSettings({ ...invoiceSettings, companyName: e.target.value })}
                        placeholder="Your Company Name"
                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"
                      />
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Company TIN *</label>
                      <input
                        type="text"
                        value={invoiceSettings.companyTIN}
                        onChange={(e) => setInvoiceSettings({ ...invoiceSettings, companyTIN: e.target.value })}
                        placeholder="XXX-XXX-XXX-XXX"
                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"
                      />
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Company Address *</label>
                      <textarea
                        value={invoiceSettings.companyAddress}
                        onChange={(e) => setInvoiceSettings({ ...invoiceSettings, companyAddress: e.target.value })}
                        placeholder="Complete business address"
                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"
                        rows="3"
                      />
                    </div>

                    <div className="grid grid-cols-2 gap-4">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Default VAT %</label>
                        <input
                          type="number"
                          step="0.01"
                          min="0"
                          max="100"
                          value={invoiceSettings.defaultVAT}
                          onChange={(e) => setInvoiceSettings({ ...invoiceSettings, defaultVAT: e.target.value })}
                          placeholder="12"
                          className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"
                        />
                      </div>

                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">Invoice Prefix</label>
                        <input
                          type="text"
                          value={invoiceSettings.invoicePrefix}
                          onChange={(e) => setInvoiceSettings({ ...invoiceSettings, invoicePrefix: e.target.value.toUpperCase() })}
                          placeholder="INV"
                          className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </>
            )}

            {activeTab === 'signature' && (
              <>
                {/* Terms and Conditions */}
                <div className="bg-white rounded-xl shadow-lg p-6">
                  <div className="flex items-center justify-between mb-4">
                    <h3 className="text-xl font-bold">Terms and Conditions</h3>
                    <button
                      onClick={saveInvoiceSettings}
                      className="flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:shadow-lg transition-all font-semibold"
                    >
                      <Save />
                      Save Settings
                    </button>
                  </div>
                  
                  <textarea
                    value={invoiceSettings.termsAndConditions}
                    onChange={(e) => setInvoiceSettings({ ...invoiceSettings, termsAndConditions: e.target.value })}
                    placeholder="Enter your terms and conditions here..."
                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"
                    rows="8"
                  />
                </div>

                {/* Signature Upload */}
                <div className="bg-white rounded-xl shadow-lg p-6">
                  <h3 className="text-xl font-bold mb-4">Company Signature</h3>
                  
                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">Signed By</label>
                      <input
                        type="text"
                        value={invoiceSettings.signedBy}
                        onChange={(e) => setInvoiceSettings({ ...invoiceSettings, signedBy: e.target.value })}
                        placeholder="Name of signatory"
                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"
                      />
                    </div>
                    
                    <div>
                      <input
                        type="file"
                        id="signatureUpload"
                        accept="image/*"
                        style={{ display: 'none' }}
                        onChange={(e) => {
                          const file = e.target.files[0];
                          if (file) uploadToCloudinary(file, 'signature');
                        }}
                      />
                      
                      <button
                        onClick={() => document.getElementById('signatureUpload').click()}
                        disabled={uploadingSignature}
                        className={`flex items-center gap-2 px-4 py-2 rounded-lg text-white transition-all ${
                          uploadingSignature ? 'bg-gray-400 cursor-not-allowed' : 'bg-blue-500 hover:bg-blue-600'
                        }`}
                      >
                        <Upload />
                        {uploadingSignature ? 'Uploading...' : 'Upload Signature'}
                      </button>
                      
                      {invoiceSettings.signatureUrl && (
                        <div className="mt-4 relative inline-block">
                          <img 
                            src={invoiceSettings.signatureUrl} 
                            alt="Signature" 
                            className="h-16 border-2 border-gray-200 rounded-lg"
                          />
                          <button
                            onClick={() => setInvoiceSettings({ ...invoiceSettings, signatureUrl: '' })}
                            className="absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600"
                          >
                            <X />
                          </button>
                        </div>
                      )}
                    </div>
                  </div>
                </div>
              </>
            )}
          </div>

          {/* Right Column - Preview */}
          <div className="lg:sticky lg:top-24 lg:h-fit">
            <div className="bg-white rounded-xl shadow-lg p-6">
              <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
                <FileText />
                Live Preview
              </h3>
              
              <div className="border-2 border-gray-200 rounded-lg p-6 bg-gray-50" style={{ fontFamily: invoiceLayoutConfig.styling.fontFamily, fontSize: `${invoiceLayoutConfig.styling.fontSize}px` }}>
                {/* Render sections in order */}
                {getSortedSections().map(sectionKey => {
                  const section = invoiceLayoutConfig.sections[sectionKey];
                  if (!section.visible) return null;

                  switch(sectionKey) {
case 'header':
  const isLogoLeft = invoiceLayoutConfig.logoPosition === 'left' && invoiceLayoutConfig.logoUrl;
  const headerStyle = invoiceLayoutConfig.sections.header;
  return (
    <div key={sectionKey} className="mb-3 pb-3 border-b" style={{ borderColor: '#e5e7eb' }}>
      <div className={isLogoLeft ? "flex items-center gap-4" : "text-center"}>
        {invoiceLayoutConfig.logoUrl && invoiceLayoutConfig.logoPosition === 'top' && (
          <div className="mb-2">
            <img src={invoiceLayoutConfig.logoUrl} alt="Logo" className="h-12 mx-auto object-contain" />
          </div>
        )}
        
        {invoiceLayoutConfig.logoUrl && invoiceLayoutConfig.logoPosition === 'left' && (
          <img src={invoiceLayoutConfig.logoUrl} alt="Logo" className="h-10 object-contain" />
        )}
        
        <div className={isLogoLeft ? "flex-1" : ""}>
          <h1 className="mb-1" style={{ 
            color: headerStyle.color, 
            fontSize: `${headerStyle.fontSize}px`,
            fontWeight: headerStyle.fontWeight 
          }}>INVOICE</h1>
          <div style={{ fontSize: `${headerStyle.fontSize * 0.4}px`, color: headerStyle.color }}>
            <strong>Invoice No:</strong> INV-0001 | <strong>Date:</strong> {new Date().toLocaleDateString()}
          </div>
        </div>
      </div>
    </div>
  );

case 'companyInfo':
  const companyStyle = invoiceLayoutConfig.sections.companyInfo;
  return (
    <div key={sectionKey} className={`grid ${section.columns === 2 ? 'grid-cols-2' : 'grid-cols-1'} gap-3 mb-3`}>
      <div className="border p-2 rounded" style={{ borderColor: '#e5e7eb', fontSize: `${companyStyle.fontSize}px`, color: companyStyle.color, fontWeight: companyStyle.fontWeight }}>
        <p className="font-bold mb-1" style={{ color: invoiceLayoutConfig.styling.primaryColor }}>Seller Information</p>
        <p><strong>Name:</strong> {invoiceSettings.companyName || 'Your Company Name'}</p>
        <p><strong>TIN:</strong> {invoiceSettings.companyTIN || 'XXX-XXX-XXX'}</p>
        <p><strong>Address:</strong> {invoiceSettings.companyAddress || 'Your Address'}</p>
      </div>
      <div className="border p-2 rounded" style={{ borderColor: '#e5e7eb', fontSize: `${companyStyle.fontSize}px`, color: companyStyle.color, fontWeight: companyStyle.fontWeight }}>
        <p className="font-bold mb-1" style={{ color: invoiceLayoutConfig.styling.primaryColor }}>Buyer Information</p>
        <p><strong>Name:</strong> Customer Name</p>
        <p><strong>TIN:</strong> N/A</p>
        <p><strong>Address:</strong> Customer Address</p>
      </div>
    </div>
  );

case 'itemsTable':
  const tableStyle = invoiceLayoutConfig.sections.itemsTable;
  return (
    <div key={sectionKey} className="mb-3 overflow-x-auto">
      <table className="w-full border-collapse" style={{ fontSize: `${tableStyle.fontSize}px`, color: tableStyle.color }}>
        <thead>
          <tr style={{ backgroundColor: tableStyle.headerBgColor || invoiceLayoutConfig.styling.primaryColor, color: 'white' }}>
            <th className="border p-1 text-left">Item</th>
            <th className="border p-1 text-center">Qty</th>
            <th className="border p-1 text-right">Price</th>
            <th className="border p-1 text-right">Total</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td className="border p-1">Sample Product</td>
            <td className="border p-1 text-center">2</td>
            <td className="border p-1 text-right">₱100.00</td>
            <td className="border p-1 text-right font-semibold">₱200.00</td>
          </tr>
        </tbody>
      </table>
    </div>
  );

case 'totals':
  const totalsStyle = invoiceLayoutConfig.sections.totals;
  return (
    <div key={sectionKey} className={`mb-3 ${section.position === 'right' ? 'ml-auto' : section.position === 'center' ? 'mx-auto' : ''}`} style={{ width: section.position === 'right' || section.position === 'center' ? '200px' : '100%' }}>
      <div className="space-y-1" style={{ fontSize: `${totalsStyle.fontSize}px`, color: totalsStyle.color, fontWeight: totalsStyle.fontWeight }}>
                            <div className="flex justify-between border-b pb-1">
                              <span>Subtotal:</span>
                              <span>₱200.00</span>
                            </div>
                            <div className="flex justify-between border-b pb-1">
                              <span>VAT ({invoiceSettings.defaultVAT}%):</span>
                              <span>₱{(200 * (parseFloat(invoiceSettings.defaultVAT) / 100)).toFixed(2)}</span>
                            </div>
                            <div className="flex justify-between font-bold p-2 rounded" style={{ backgroundColor: invoiceLayoutConfig.styling.primaryColor, color: 'white' }}>
                              <span>Grand Total:</span>
                              <span>₱{(200 * (1 + parseFloat(invoiceSettings.defaultVAT) / 100)).toFixed(2)}</span>
                            </div>
                          </div>
                        </div>
                      );

case 'paymentMethod':
  const paymentStyle = invoiceLayoutConfig.sections.paymentMethod;
  return (
    <div key={sectionKey} className="mt-4 pt-3 border-t" style={{ borderTopWidth: '1px', borderColor: '#e5e7eb' }}>
      <p style={{ fontSize: `${paymentStyle.fontSize}px`, color: paymentStyle.color, fontWeight: paymentStyle.fontWeight }}>
        <span className="font-semibold">Payment Method: </span>
                            <span className="font-medium">Cash</span>
                          </p>
                        </div>
                      );

case 'terms':
  const termsStyle = invoiceLayoutConfig.sections.terms;
  return (
    <div key={sectionKey} className="mb-3 pb-3 border-b" style={{ borderColor: '#e5e7eb', fontSize: `${termsStyle.fontSize}px`, color: termsStyle.color, fontWeight: termsStyle.fontWeight }}>
      {invoiceSettings.termsAndConditions && (
        <>
          <p className="font-bold mb-1" style={{ color: invoiceLayoutConfig.styling.primaryColor }}>Terms and Conditions</p>
          <p className="whitespace-pre-line">{invoiceSettings.termsAndConditions}</p>
        </>
      )}
      {!invoiceSettings.termsAndConditions && (
        <p className="italic" style={{ color: '#9CA3AF' }}>We Buyers Agree!</p>
      )}
      <div className="mt-2">
        <p className="font-bold mb-1" style={{ color: '#15803D' }}>Special Instructions (if any)</p>
        <p className="italic" style={{ color: '#4B5563' }}>Will appear here if provided during order creation</p>
                          </div>
                        </div>
                      );

case 'signature':
  const signatureStyle = invoiceLayoutConfig.sections.signature;
  return (
    <div key={sectionKey} className={`grid ${section.columns === 2 ? 'grid-cols-2' : 'grid-cols-1'} gap-4 mt-4 mb-4 pt-3 pb-3 border-t border-b`} style={{ borderColor: '#e5e7eb', fontSize: `${signatureStyle.fontSize}px`, color: signatureStyle.color, fontWeight: signatureStyle.fontWeight }}>
      <div className="text-center">
        <div className="border-t border-gray-400 w-32 mx-auto mb-1"></div>
        <p>Customer Signature</p>
      </div>
      <div className="text-center">
        {invoiceSettings.signatureUrl && (
          <img src={invoiceSettings.signatureUrl} alt="Signature" className="h-8 mx-auto mb-1 object-contain" />
        )}
        <div className="border-t border-gray-400 w-32 mx-auto mb-1"></div>
        <p className="font-bold">{invoiceSettings.signedBy || 'Kristel mae Ben, Coil'}</p>
        <p style={{ color: '#4B5563' }}>Company Representative</p>
      </div>
    </div>
  );


case 'footer':
  const footerStyle = invoiceLayoutConfig.sections.footer;
  return (
    <div key={sectionKey} className="mt-4 pt-3 border-t text-center" style={{ 
      borderColor: '#e5e7eb',
      fontSize: `${footerStyle.fontSize}px`,
      color: footerStyle.color,
      fontWeight: footerStyle.fontWeight
    }}>
      <p>Thank you for your business!</p>
      <p className="mt-1">For inquiries: contact@{invoiceSettings.companyName?.toLowerCase().replace(/\s+/g, '') || 'yourcompany'}.com</p>
    </div>
  );




default:
  return null;
                  }
                })}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

ReactDOM.render(<InvoiceManager />, document.getElementById('root'));
</script>
</body>
</html>